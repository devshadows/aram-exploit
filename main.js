const axios = require('axios');
const LCUConnector = require('lcu-connector');
const connector = new LCUConnector();
const https = require('https');
const agent = new https.Agent({
    rejectUnauthorized: false,
});
const readline = require('readline');
const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});
const log = console.log;
var api;


connector.on('connect', async(credentials) => {
	console.log('Conectado com o client.');
	perguntar();

	api = axios.create({
		baseURL:`https://127.0.0.1:${credentials.port}`,
		headers: {
			'content-type': 'application/json',
			'Authorization': `Basic ${Buffer.from(`${credentials.username}:${credentials.password}`)
            .toString("base64")}`,
		},
		httpsAgent: agent
	});
}).start();

function boostar(){
	log('boostado')
	api.post('/lol-champ-select/v1/team-boost/purchase/')
}

var perguntar = function () {
	rl.question('voce quer boostar? (s/n)', function (answer){
		if (answer == 's')
			return boostar();
		else 
			return log('vc recusou')
	});
};
